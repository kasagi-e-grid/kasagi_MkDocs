{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"\u306f\u3058\u3081\u306b","text":"<p>\u3053\u306e\u30b5\u30a4\u30c8\u3067\u306f\u3001\u30de\u30b8\u30ab\u30f3[133.242.23.174]\u3067\u4f7f\u7528\u3057\u3066\u3044\u308bWeb\u30b5\u30fc\u30d0\u30fc\u306e\u69cb\u6210\u30fb\u904b\u7528\u30fb\u30c8\u30e9\u30d6\u30eb\u5bfe\u5fdc\u7b49\u306e</p> <p>\u30ca\u30ec\u30c3\u30b8\u3092\u307e\u3068\u3081\u3066\u3044\u307e\u3059\u3002</p> <ul> <li>\u30b5\u30fc\u30d0\u30fc\u69cb\u6210</li> <li>Apache\u8a2d\u5b9a</li> </ul> <ul> <li>\u30c7\u30d7\u30ed\u30a4\u624b\u9806</li> </ul> <ul> <li>\u30c8\u30e9\u30d6\u30eb\u5bfe\u5fdc</li> </ul> <ul> <li>\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u8a2d\u5b9a</li> </ul>"},{"location":"#server","title":"Server","text":""},{"location":"#deploy","title":"deploy","text":""},{"location":"#troubleshooting","title":"troubleshooting","text":""},{"location":"#security","title":"security","text":""},{"location":"#mkdocs","title":"MkDocs\u30d5\u30a1\u30a4\u30eb\u69cb\u6210","text":"<pre><code>docs/\n\u251c\u2500\u2500 index.md                    \u2190 \u306f\u3058\u3081\u306b\n\u251c\u2500\u2500 server/\n\u2502   \u251c\u2500\u2500 architecture.md         \u2190 \u30b5\u30fc\u30d0\u30fc\u69cb\u6210\n\u2502   \u251c\u2500\u2500 apache.md               \u2190 Apache + Passenger \u69cb\u6210\n\u2502   \u251c\u2500\u2500 nfs.md                  \u2190 NFS\u306b\u3064\u3044\u3066\n\u2502   |\u2500\u2500 backup.md               \u2190 \u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u30fb\u30ea\u30b9\u30c8\u30a2\n\u251c\u2500\u2500 deploy/\n\u2502   \u251c\u2500\u2500 flow.md                 \u2190 \u30c7\u30d7\u30ed\u30a4\u30d5\u30ed\u30fc\n\u251c\u2500\u2500 git/\n\u2502   \u251c\u2500\u2500 operation.md            \u2190 Git\u904b\u7528\n\u251c\u2500\u2500 troubleshooting/\n\u2502   \u251c\u2500\u2500 logs.md                 \u2190 \u30ed\u30b0\u306e\u78ba\u8a8d\n|\u2500\u2500 security/\n|   \u251c\u2500\u2500 firewall.md             \u2190 \u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u8a2d\u5b9a\n|   \u2514\u2500\u2500 ssh.md                  \u2190 SSH\u63a5\u7d9a\u30fb\u9375\u7ba1\u7406\n\u2514\u2500\u2500 stylesheets/                \u2190 CSS\n</code></pre>"},{"location":"deploy/flow/","title":"\u30c7\u30d7\u30ed\u30a4\u30d5\u30ed\u30fc","text":"<p><code>\u4f5c\u6210\u8005\uff1a\u7b20\u6728</code></p> <p>\u3053\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u3064\u3044\u3066</p> <p>\u30de\u30b8\u30ab\u30f3\u306e\u30c7\u30d7\u30ed\u30a4\u624b\u9806\u3092\u307e\u3068\u3081\u305f\u3082\u306e\u3067\u3059\u3002</p>"},{"location":"deploy/flow/#_2","title":"\u30c7\u30d7\u30ed\u30a4","text":"<ol> <li> <p>SSH\u30a2\u30af\u30bb\u30b9 <code>ssh -p 23422 -i \u79d8\u5bc6\u9375 majisemi@133.242.49.167</code></p> </li> <li> <p>\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30d5\u30a1\u30a4\u30eb\u306b\u79fb\u52d5 <code>cd /var/share/admintools</code></p> </li> <li> <p><code>git fetch</code></p> </li> <li> <p><code>git pull</code></p> </li> <li> <p>(\u203b\u5fc5\u8981\u306b\u5fdc\u3058\u3066) <code>bundle install</code></p> </li> <li> <p>(\u203b\u5fc5\u8981\u306b\u5fdc\u3058\u3066) <code>bundle exec rails assets:precompile</code></p> </li> <li> <p>Apache\u306e\u518d\u8d77\u52d5 <code>systemctl restart httpd</code></p> </li> </ol> <p>\u30e1\u30e2</p> <p>none</p>"},{"location":"git/operation/","title":"Git\u904b\u7528","text":"<p><code>\u4f5c\u6210\u8005\uff1a\u7b20\u6728</code></p> <p>\u3053\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u3064\u3044\u3066</p> <p>\u30de\u30b8\u30ab\u30f3\u306eGit\u306e\u904b\u7528\u30eb\u30fc\u30eb\u3092\u307e\u3068\u3081\u305f\u3082\u306e\u3067\u3059\u3002</p>"},{"location":"git/operation/#git_1","title":"Git\u30d6\u30e9\u30f3\u30c1\u904b\u7528\u30eb\u30fc\u30eb","text":"<p>\u30d6\u30e9\u30f3\u30c1\u540d</p> <ul> <li>Notion\u30ab\u30fc\u30c9\u306b\u8a18\u8f09\u3055\u308c\u3066\u3044\u308bID\uff08\u6570\u5024\uff09</li> </ul> <p>PR\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8</p> Open <pre><code>## \u5bfe\u5fdc\u5185\u5bb9\n\n{\u3000------\u5bfe\u5fdc\u3057\u305f\u5185\u5bb9\u306b\u3064\u3044\u3066\u8a18\u8f09------\u3000}\n\n## \u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8\uff08\u5fc5\u8981\u306b\u5fdc\u3058\u3066\uff09\n\n{\u3000------\u30b9\u30af\u30b7\u30e7------\u3000}\n</code></pre> <p>\u30e1\u30e2</p> <p>none</p>"},{"location":"server/apache/","title":"Apache + Passenger \u69cb\u6210","text":"<p><code>\u4f5c\u6210\u8005\uff1a\u7b20\u6728</code></p> <p>\u3053\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u3064\u3044\u3066</p> <p>Apache + Passenger\u3067\u666e\u6bb5\u5b9f\u884c\u3057\u3066\u3044\u308b\u30b3\u30de\u30f3\u30c9\u306a\u3069\u3092\u307e\u3068\u3081\u305f\u3082\u306e\u3067\u3059\u3002</p>"},{"location":"server/apache/#request","title":"Request\u307e\u3067\u306e\u6d41\u308c","text":"<pre><code>[Client]\n   \u2193\n[Apache (mod_passenger)]\n   \u2193\n[Rails App]\n</code></pre>"},{"location":"server/apache/#_1","title":"\u518d\u8d77\u52d5\u65b9\u6cd5","text":"<ol> <li> <p><code>systemctl restart httpd</code></p> </li> <li> <p><code>touch [RailsRoot]/tmp/restart.txt</code></p> </li> </ol> <p><code>tmp/restart.txt</code>\u3000\u2190\u3000Passenger \u306f\u3053\u306e\u30d5\u30a1\u30a4\u30eb\u306e\u30bf\u30a4\u30e0\u30b9\u30bf\u30f3\u30d7\u3092\u898b\u308b\u3053\u3068\u3067\u518d\u8d77\u52d5\u3092\u5224\u65ad\u3057\u307e\u3059\u3002</p>"},{"location":"server/apache/#_2","title":"\u52d5\u4f5c\u78ba\u8a8d","text":"<ol> <li> <p><code>passenger-status</code></p> </li> <li> <p><code>systemctl status httpd</code></p> </li> <li> <p><code>/var/httpd/logs/access.log</code>\u3092\u78ba\u8a8d\u3059\u308b</p> </li> <li> <p>Rails\u30ed\u30b0\u3092\u78ba\u8a8d\u3059\u308b</p> </li> </ol> <p></p> <p>\u30e1\u30e2</p> <ul> <li> <p>80</p> </li> <li> <p>443</p> </li> </ul>"},{"location":"server/apache/#_3","title":"\u95a2\u9023\u30dd\u30fc\u30c8","text":""},{"location":"server/architecture/","title":"\u30b5\u30fc\u30d0\u30fc\u69cb\u6210","text":"<p><code>\u4f5c\u6210\u8005\uff1a\u7b20\u6728</code></p> <p>\u3053\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u3064\u3044\u3066</p> <p>\u73fe\u884c\u306eWeb\u30b5\u30fc\u30d3\u30b9\u904b\u7528\u306b\u95a2\u308f\u308b\u30a4\u30f3\u30d5\u30e9\u69cb\u6210\u56f3\u3067\u3059\u3002</p>"},{"location":"server/architecture/#_2","title":"\u672c\u756a\u74b0\u5883","text":"<p>     \ud83d\udce5 drawio\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9 </p> <p></p> <p>\u30e1\u30e2</p> <p>none</p>"},{"location":"server/nfs/","title":"NFS\u306b\u3064\u3044\u3066","text":"<p><code>\u4f5c\u6210\u8005\uff1a\u7b20\u6728</code></p> <p>\u3053\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u3064\u3044\u3066</p> <p>\u30de\u30b8\u30ab\u30f3\u306eNFS\uff08\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\uff09\u306b\u3064\u3044\u3066</p>"},{"location":"server/nfs/#_1","title":"\u524d\u63d0\u60c5\u5831","text":"<p>NFS\u30b5\u30fc\u30d0</p> <ul> <li>133.242.18.191\u3000\u203brails3\u5074\u306e\u30de\u30b8\u30ab\u30f3\u30b5\u30fc\u30d0\u30fc</li> </ul> <p>NFS\u30af\u30e9\u30a4\u30a2\u30f3\u30c8</p> <ul> <li> <p>133.242.23.174\u3000\u203brails7\u5074\u306e\u30de\u30b8\u30ab\u30f3\u30b5\u30fc\u30d0\u30fc</p> </li> <li> <p>153.120.17.233\u3000\u203b\u516c\u958b\u5074</p> </li> </ul>"},{"location":"server/nfs/#nfs_1","title":"NFS\u3068\u306f #\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8","text":"<p>\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3092\u901a\u3058\u3066\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u3092\u5171\u6709\u3059\u308b\u969b\u306b\u4f7f\u308f\u308c\u308b\u901a\u4fe1\u30d7\u30ed\u30c8\u30b3\u30eb\u3002 \u4e3b\u306bUnix\u7cfbOS\u540c\u58eb\u306e\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u5171\u6709\u306b\u306fNFS\u304c\u53e4\u304f\u304b\u3089\u4f7f\u308f\u308c\u3066\u304a\u308a\u3001 NFS\u30b5\u30fc\u30d0\u304c\u516c\u958b\u3057\u305f\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092NFS\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304c\u30de\u30a6\u30f3\u30c8\u3059\u308b\u3053\u3068\u3067\u3001 \u30ea\u30e2\u30fc\u30c8\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u3092\u30ed\u30fc\u30ab\u30eb\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u3068\u540c\u69d8\u306b\u6271\u3046\u3053\u3068\u304c\u53ef\u80fd\u3068\u306a\u308b\u3002</p>"},{"location":"server/nfs/#_2","title":"\u63a5\u7d9a\u624b\u9806","text":"<p>\u53c2\u8003\u8a18\u4e8b</p> <ol> <li> <p>NFS\u306e\u516c\u958b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u78ba\u8a8d <code>cat /etc/exports</code>\u3000\u2190\u203b NFS\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306b\u5bfe\u3059\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u8a31\u53ef\u306e\u8a18\u8ff0\u304c\u3042\u308b\u304b</p> </li> <li> <p>(\u203b\u5fc5\u8981\u306b\u5fdc\u3058\u3066) <code>systemctl start nfs-server</code></p> </li> <li> <p>(\u203b\u5fc5\u8981\u306b\u5fdc\u3058\u3066) <code>systemctl enable nfs-server</code></p> </li> <li> <p>NFS\u30b5\u30fc\u30d0\u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u3092\u78ba\u8a8d <code>systemctl status nfs-server</code></p> </li> <li> <p>NFS\u30b5\u30fc\u30d0\u3067\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u78ba\u8a8d <code>showmount -e</code></p> </li> </ol> <ol> <li> <p><code>mount -t nfs {NFS\u30af\u30e9\u30a4\u30a2\u30f3\u30c8IP}:///var/share/admintools/public/system /var/share/admintools/public/system</code></p> </li> <li> <p>\u30de\u30a6\u30f3\u30c8\u3055\u308c\u3066\u3044\u308b\u304b\u78ba\u8a8d <code>df</code></p> </li> </ol> <p>\u30e1\u30e2</p> <p>UNIX\u3067\u306f\u30d5\u30a1\u30a4\u30eb\u306e\u30a2\u30af\u30bb\u30b9\u5236\u5fa1\u306b\u300cUID\uff08\u30e6\u30fc\u30b6\u30fcID\uff09\u300d\u3068\u300cGID\uff08\u30b0\u30eb\u30fc\u30d7ID\uff09\u300d\u3092\u4f7f\u3044\u307e\u3059\u3002</p> <p>NFS\u3082\u3053\u306e\u4ed5\u7d44\u307f\u306b\u57fa\u3065\u3044\u3066\u3044\u3066\u3001NFS\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304c\u30d5\u30a1\u30a4\u30eb\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\u304d\u3001</p> <p>\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5074\u306eUID/GID\u304c\u305d\u306e\u307e\u307eNFS\u30b5\u30fc\u30d0\u306b\u9001\u3089\u308c\u3001\u30b5\u30fc\u30d0\u5074\u3067\u306f\u305d\u306eID\u306b\u57fa\u3065\u3044\u3066\u30a2\u30af\u30bb\u30b9\u6a29\u3092\u5224\u65ad\u3057\u307e\u3059\u3002</p> <p>\u53c2\u8003\u8a18\u4e8b</p> <p>\u203b\u5b9f\u969b\u306e\u30de\u30b8\u30ab\u30f3\u30b5\u30fc\u30d0\u30fc\u3067\u306fGID\u3068UID\u3092\u7d71\u4e00\u3057\u3066\u3044\u307e\u3059\u3002</p>"},{"location":"server/nfs/#nfs_2","title":"NFS\u30b5\u30fc\u30d0\u5074","text":""},{"location":"server/nfs/#nfs_3","title":"NFS\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5074","text":""},{"location":"server/nfs/#uid-gid","title":"UID, GID\u306b\u3064\u3044\u3066","text":""}]}